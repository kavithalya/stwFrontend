{"ast":null,"code":"var _jsxFileName = \"C:\\\\Mani\\\\Office\\\\Template\\\\StwEcommerce\\\\frontend\\\\pages\\\\product-details\\\\common\\\\product_section.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState } from 'react';\nimport { Container, Row, Col, Media, Modal, ModalBody } from 'reactstrap';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { CurrencyContext } from '../../../helpers/Currency/CurrencyContext';\nimport CartContext from '../../../helpers/cart';\nimport { WishlistContext } from '../../../helpers/wishlist/WishlistContext';\nimport { CompareContext } from '../../../helpers/Compare/CompareContext';\nimport { useRouter } from 'next/router';\nconst GET_PRODUCTS = gql`\n    query  products($type:_CategoryType!,$indexFrom:Int! ,$limit:Int!) {\n        products (type: $type,indexFrom:$indexFrom ,limit:$limit){\n            items {\n                id\n                title\n                description\n                type\n                brand\n                category \n                price\n                new\n                stock\n                sale\n                discount\n                variants{\n                    id\n                    sku\n                    size\n                    color\n                    image_id\n                }\n                images{\n                    image_id\n                    id\n                    alt\n                    src\n                }\n            }\n        }\n    }\n`;\n\nconst ProductSection = () => {\n  const router = useRouter();\n  const curContext = useContext(CurrencyContext);\n  const wishlistContext = useContext(WishlistContext);\n  const compareContext = useContext(CompareContext);\n  const symbol = curContext.state.symbol;\n  const currency = curContext.state;\n  const cartCtx = useContext(CartContext);\n  const addToCart = cartCtx.addToCart;\n  const quantity = cartCtx.quantity;\n  const plusQty = cartCtx.plusQty;\n  const minusQty = cartCtx.minusQty;\n  const setQuantity = cartCtx.setQuantity;\n  const {\n    0: selectedProduct,\n    1: setSelectedProduct\n  } = useState();\n  const {\n    0: image,\n    1: setImage\n  } = useState('');\n  const {\n    0: modal,\n    1: setModal\n  } = useState(false);\n\n  const toggle = () => setModal(!modal);\n\n  const uniqueTags = [];\n\n  const changeQty = e => {\n    setQuantity(parseInt(e.target.value));\n  };\n\n  const clickProductDetail = product => {\n    const titleProps = product.title.split(' ').join('');\n    router.push(`/product-details/${product.id}` + '-' + `${titleProps}`);\n  };\n\n  const getSelectedProduct = item => {\n    setSelectedProduct(item);\n    toggle();\n  };\n\n  var {\n    loading,\n    data\n  } = useQuery(GET_PRODUCTS, {\n    variables: {\n      type: \"fashion\",\n      indexFrom: 0,\n      limit: 8\n    }\n  });\n  return __jsx(\"section\", {\n    className: \"section-b-space ratio_asos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, __jsx(Col, {\n    className: \"product-related\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, \"related products\"))), __jsx(Row, {\n    className: \"search-product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, !data || !data.products || data.products.items.length === 0 || loading ? 'loading' : __jsx(React.Fragment, null, data && data.products.items.slice(0, 6).map((product, index) => __jsx(Col, {\n    xl: \"2\",\n    md: \"4\",\n    sm: \"6\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"product-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 37\n    }\n  }, __jsx(\"div\", {\n    className: \"img-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    className: \"front\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 45\n    }\n  }, __jsx(\"a\", {\n    href: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 49\n    }\n  }, __jsx(Media, {\n    onClick: () => clickProductDetail(product),\n    src: product.images[0].src,\n    className: \"img-fluid blur-up lazyload bg-img\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 53\n    }\n  }))), __jsx(\"div\", {\n    className: \"back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 45\n    }\n  }, __jsx(\"a\", {\n    href: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 49\n    }\n  }, __jsx(Media, {\n    src: product.images[1].src,\n    className: \"img-fluid blur-up lazyload bg-img\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 64\n    }\n  }))), __jsx(\"div\", {\n    className: \"cart-info cart-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 45\n    }\n  }, __jsx(\"button\", {\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#addtocart\",\n    title: \"Add to cart\",\n    onClick: () => addToCart(product, quantity),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 49\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-shopping-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 53\n    }\n  })), __jsx(\"a\", {\n    href: \"#\",\n    onClick: () => wishlistContext.addToWish(product),\n    title: \"Add to Wishlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 49\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-heart\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 77\n    }\n  })), __jsx(\"a\", {\n    href: \"#\",\n    onClick: () => getSelectedProduct(product),\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#quick-view\",\n    title: \"Quick View\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 49\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-search\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 53\n    }\n  })), __jsx(\"a\", {\n    href: \"#\",\n    onClick: () => compareContext.addToCompare(product),\n    title: \"Compare\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 49\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-refresh\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 53\n    }\n  })))), __jsx(\"div\", {\n    className: \"product-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 41\n    }\n  }, __jsx(\"div\", {\n    className: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 69\n    }\n  }), \" \", __jsx(\"i\", {\n    className: \"fa fa-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 100\n    }\n  }), \" \", __jsx(\"i\", {\n    className: \"fa fa-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 131\n    }\n  }), \" \", __jsx(\"i\", {\n    className: \"fa fa-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 77\n    }\n  }), \" \", __jsx(\"i\", {\n    className: \"fa fa-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 108\n    }\n  })), __jsx(\"a\", {\n    href: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 45\n    }\n  }, __jsx(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 49\n    }\n  }, product.title)), __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 45\n    }\n  }, symbol, product.price), __jsx(\"ul\", {\n    className: \"color-variant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }, __jsx(\"li\", {\n    className: \"bg-light0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 49\n    }\n  }), __jsx(\"li\", {\n    className: \"bg-light1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 49\n    }\n  }), __jsx(\"li\", {\n    className: \"bg-light2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 49\n    }\n  })))))))), selectedProduct ? __jsx(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    className: \"modal-lg quickview-modal\",\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, __jsx(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, __jsx(Col, {\n    lg: \"6\",\n    xs: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: \"quick-view-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }, __jsx(Media, {\n    src: `${selectedProduct.variants ? image ? image : selectedProduct.images[0].src : selectedProduct.images[0].src}`,\n    alt: \"\",\n    className: \"img-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 37\n    }\n  }))), __jsx(Col, {\n    lg: \"6\",\n    className: \"rtl-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: \"product-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 37\n    }\n  }, \" \", selectedProduct.title, \" \"), __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, \" \", (selectedProduct.price * 1).toFixed(2)), selectedProduct.variants ? __jsx(\"ul\", {\n    className: \"color-variant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 41\n    }\n  }, uniqueTags ? __jsx(\"ul\", {\n    className: \"color-variant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 49\n    }\n  }, selectedProduct.type === 'jewellery' || selectedProduct.type === 'nursery' || selectedProduct.type === 'beauty' || selectedProduct.type === 'electronics' || selectedProduct.type === 'goggles' || selectedProduct.type === 'watch' || selectedProduct.type === 'pets' ? '' : __jsx(React.Fragment, null, uniqueTags ? __jsx(\"ul\", {\n    className: \"color-variant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 69\n    }\n  }, uniqueTags.map((vari, i) => {\n    return __jsx(\"li\", {\n      className: vari.color,\n      key: i,\n      title: vari.color,\n      onClick: () => variantChangeByColor(vari.image_id, selectedProduct.images),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 81\n      }\n    });\n  })) : '')) : '') : '', __jsx(\"div\", {\n    className: \"border-product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, __jsx(\"h6\", {\n    className: \"product-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 41\n    }\n  }, \"product details\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 41\n    }\n  }, selectedProduct.description)), __jsx(\"div\", {\n    className: \"product-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 37\n    }\n  }, __jsx(\"button\", {\n    className: \"btn btn-solid\",\n    onClick: () => addToCart(selectedProduct, quantity),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 41\n    }\n  }, \"add to cart\"), __jsx(\"button\", {\n    className: \"btn btn-solid\",\n    onClick: () => clickProductDetail(selectedProduct),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 41\n    }\n  }, \"View detail\"))))))) : \"\"));\n};\n\nexport default ProductSection;","map":{"version":3,"sources":["C:/Mani/Office/Template/StwEcommerce/frontend/pages/product-details/common/product_section.js"],"names":["React","useContext","useState","Container","Row","Col","Media","Modal","ModalBody","useQuery","gql","CurrencyContext","CartContext","WishlistContext","CompareContext","useRouter","GET_PRODUCTS","ProductSection","router","curContext","wishlistContext","compareContext","symbol","state","currency","cartCtx","addToCart","quantity","plusQty","minusQty","setQuantity","selectedProduct","setSelectedProduct","image","setImage","modal","setModal","toggle","uniqueTags","changeQty","e","parseInt","target","value","clickProductDetail","product","titleProps","title","split","join","push","id","getSelectedProduct","item","loading","data","variables","type","indexFrom","limit","products","items","length","slice","map","index","images","src","addToWish","addToCompare","price","variants","toFixed","vari","i","color","variantChangeByColor","image_id","description"],"mappings":"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","sourcesContent":["import React, { useContext,useState } from 'react';\r\nimport { Container, Row, Col, Media,Modal,ModalBody } from 'reactstrap';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport { CurrencyContext } from '../../../helpers/Currency/CurrencyContext';\r\nimport CartContext from '../../../helpers/cart';\r\nimport {WishlistContext} from '../../../helpers/wishlist/WishlistContext';\r\nimport { CompareContext } from '../../../helpers/Compare/CompareContext';\r\nimport { useRouter } from 'next/router'\r\n\r\nconst GET_PRODUCTS = gql`\r\n    query  products($type:_CategoryType!,$indexFrom:Int! ,$limit:Int!) {\r\n        products (type: $type,indexFrom:$indexFrom ,limit:$limit){\r\n            items {\r\n                id\r\n                title\r\n                description\r\n                type\r\n                brand\r\n                category \r\n                price\r\n                new\r\n                stock\r\n                sale\r\n                discount\r\n                variants{\r\n                    id\r\n                    sku\r\n                    size\r\n                    color\r\n                    image_id\r\n                }\r\n                images{\r\n                    image_id\r\n                    id\r\n                    alt\r\n                    src\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\n\r\nconst ProductSection = () => {\r\n    \r\n    const router = useRouter();\r\n    const curContext = useContext(CurrencyContext);\r\n    const wishlistContext = useContext(WishlistContext);\r\n    const compareContext = useContext(CompareContext);\r\n    const symbol = curContext.state.symbol;\r\n    const currency = curContext.state;\r\n    const cartCtx = useContext(CartContext);\r\n    const addToCart = cartCtx.addToCart;\r\n    const quantity = cartCtx.quantity;\r\n    const plusQty = cartCtx.plusQty;\r\n    const minusQty = cartCtx.minusQty;\r\n    const setQuantity = cartCtx.setQuantity;\r\n    const [selectedProduct,setSelectedProduct] = useState()\r\n    const [image, setImage] = useState('');\r\n    const [modal, setModal] = useState(false);\r\n    const toggle = () => setModal(!modal);\r\n    const uniqueTags = [];\r\n\r\n    const changeQty = (e) => {\r\n        setQuantity(parseInt(e.target.value))\r\n    }\r\n\r\n    const clickProductDetail = (product) => {\r\n        const titleProps = product.title.split(' ').join('');\r\n        router.push(`/product-details/${product.id}` + '-' + `${titleProps}`);\r\n    }\r\n\r\n    const getSelectedProduct = (item) => {\r\n        setSelectedProduct(item)\r\n        toggle()\r\n    } \r\n\r\n    var { loading, data } = useQuery(GET_PRODUCTS, {\r\n        variables: {\r\n            type: \"fashion\",\r\n            indexFrom:0,\r\n            limit:8\r\n        }\r\n    });\r\n\r\n    return (\r\n        <section className=\"section-b-space ratio_asos\">\r\n            <Container>\r\n                <Row>\r\n                    <Col className=\"product-related\">\r\n                        <h2>related products</h2>\r\n                    </Col>\r\n                </Row>\r\n                <Row className=\"search-product\">\r\n                    {(!data || !data.products || data.products.items.length === 0 || loading) ?\r\n                        'loading'\r\n                        :\r\n                        <>\r\n                            {data && data.products.items.slice(0, 6).map((product, index) =>\r\n                                <Col xl=\"2\" md=\"4\" sm=\"6\" key={index}>\r\n                                    <div className=\"product-box\">\r\n                                        <div className=\"img-wrapper\">\r\n                                            <div className=\"front\">\r\n                                                <a href={null}>\r\n                                                    <Media onClick={() => clickProductDetail(product)} src={product.images[0].src}\r\n                                                        className=\"img-fluid blur-up lazyload bg-img\" alt=\"\" /></a>\r\n                                            </div>\r\n                                            <div className=\"back\">\r\n                                                <a href={null}><Media src={product.images[1].src}\r\n                                                    className=\"img-fluid blur-up lazyload bg-img\" alt=\"\" /></a>\r\n                                            </div>\r\n                                            <div className=\"cart-info cart-wrap\">\r\n                                                <button data-toggle=\"modal\" data-target=\"#addtocart\" title=\"Add to cart\" onClick={() => addToCart(product,quantity)}>\r\n                                                    <i className=\"fa fa-shopping-cart\"></i></button>\r\n                                                <a href=\"#\"  onClick={() => wishlistContext.addToWish(product)}\r\n                                                    title=\"Add to Wishlist\"><i className=\"fa fa-heart\" aria-hidden=\"true\">\r\n                                                    </i>\r\n                                                </a>\r\n                                                <a href=\"#\" onClick={() => getSelectedProduct(product)} data-toggle=\"modal\" data-target=\"#quick-view\" title=\"Quick View\">\r\n                                                    <i className=\"fa fa-search\" aria-hidden=\"true\"></i>\r\n                                                </a>\r\n                                                <a href=\"#\" onClick={() => compareContext.addToCompare(product)}  title=\"Compare\">\r\n                                                    <i className=\"fa fa-refresh\" aria-hidden=\"true\"></i>\r\n                                                </a>\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"product-detail\">\r\n                                            <div className=\"rating\"><i className=\"fa fa-star\"></i> <i className=\"fa fa-star\"></i> <i\r\n                                                className=\"fa fa-star\"></i> <i className=\"fa fa-star\"></i> <i className=\"fa fa-star\"></i></div>\r\n                                            <a href={null}>\r\n                                                <h6>{product.title}</h6>\r\n                                            </a>\r\n                                            <h4>{symbol}{product.price}</h4>\r\n                                            <ul className=\"color-variant\">\r\n                                                <li className=\"bg-light0\"></li>\r\n                                                <li className=\"bg-light1\"></li>\r\n                                                <li className=\"bg-light2\"></li>\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n                                </Col>\r\n                            )\r\n                            }\r\n                        </>\r\n                    }\r\n\r\n                </Row>\r\n                {selectedProduct ?\r\n                <Modal isOpen={modal} toggle={toggle} className=\"modal-lg quickview-modal\" centered>\r\n                    <ModalBody>\r\n                        <Row>\r\n                            <Col lg=\"6\" xs=\"12\">\r\n                                <div className=\"quick-view-img\">\r\n                                    <Media  src={`${selectedProduct.variants ?\r\n                                        image ? image : selectedProduct.images[0].src\r\n                                        : selectedProduct.images[0].src\r\n                                        }`} alt=\"\" className=\"img-fluid\" />\r\n                                </div>\r\n                            </Col>\r\n                            <Col lg=\"6\" className=\"rtl-text\">\r\n                                <div className=\"product-right\">\r\n                                    <h2> {selectedProduct.title} </h2>\r\n                                    <h3> {(selectedProduct.price * 1).toFixed(2)}</h3>\r\n                                    {selectedProduct.variants ?\r\n                                        <ul className=\"color-variant\">\r\n                                            {uniqueTags ?\r\n                                                <ul className=\"color-variant\">\r\n                                                    {\r\n                                                        selectedProduct.type === 'jewellery' || selectedProduct.type === 'nursery' || selectedProduct.type === 'beauty' || selectedProduct.type === 'electronics' || selectedProduct.type === 'goggles' || selectedProduct.type === 'watch' || selectedProduct.type === 'pets' ?\r\n                                                            ''\r\n                                                            :\r\n                                                            <>\r\n                                                                {uniqueTags ?\r\n                                                                    <ul className=\"color-variant\">\r\n                                                                        {uniqueTags.map((vari, i) => {\r\n                                                                            return (\r\n                                                                                <li className={vari.color} key={i} title={vari.color} onClick={() => variantChangeByColor(vari.image_id, selectedProduct.images)}></li>)\r\n                                                                        })}\r\n                                                                    </ul> : ''}\r\n                                                            </>\r\n                                                    }\r\n                                                </ul> : ''}\r\n                                        </ul> : ''}\r\n                                    <div className=\"border-product\">\r\n                                        <h6 className=\"product-title\">product details</h6>\r\n                                        <p>{selectedProduct.description}</p>\r\n                                    </div>\r\n                                    {/* <div className=\"product-description border-product\">\r\n                                        {selectedProduct.size ?\r\n                                            <div className=\"size-box\">\r\n                                                <ul>\r\n                                                    {selectedProduct.size.map((size, i) => {\r\n                                                        return <li key={i}><a href={null}>{size}</a></li>\r\n                                                    })}\r\n                                                </ul>\r\n                                            </div> : ''}\r\n                                        <h6 className=\"product-title\">quantity</h6>\r\n                                        <div className=\"qty-box\">\r\n                                            <div className=\"input-group\">\r\n                                                <span className=\"input-group-prepend\">\r\n                                                    <button type=\"button\" className=\"btn quantity-left-minus\" onClick={minusQty} data-type=\"minus\" data-field=\"\">\r\n                                                        <i className=\"fa fa-angle-left\"></i>\r\n                                                    </button>\r\n                                                </span>\r\n                                                <input type=\"text\" name=\"quantity\" value={quantity} onChange={changeQty} className=\"form-control input-number\" />\r\n                                                <span className=\"input-group-prepend\">\r\n                                                    <button type=\"button\" className=\"btn quantity-right-plus\" onClick={() => plusQty(selectedProduct)} data-type=\"plus\" data-field=\"\">\r\n                                                        <i className=\"fa fa-angle-right\"></i>\r\n                                                    </button>\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div> */}\r\n                                    <div className=\"product-buttons\">\r\n                                        <button className=\"btn btn-solid\" onClick={() => addToCart(selectedProduct,quantity)} >add to cart</button>\r\n                                        <button className=\"btn btn-solid\" onClick={() => clickProductDetail(selectedProduct)} >View detail</button>\r\n                                    </div>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                    </ModalBody>\r\n                </Modal>\r\n                :\"\"}\r\n\r\n\r\n            </Container>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ProductSection;"]},"metadata":{},"sourceType":"module"}